# AGENTS.md

## Change Tracking
- Keep this file updated whenever code changes are made.
- Add a short entry under "Recent Changes" for each completed task.
- Each entry should include:
  - Date
  - Files changed
  - One-line summary of what changed and why

## Recent Changes
- 2026-02-12
  - Updated `src/features/items/components/ItemContextMenu.tsx`
  - Removed an unused `Copy` icon import so TypeScript build checks can run cleanly while validating drag/drop fixes.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`, `src/index.css`
  - Rebuilt folder drag/drop into a single custom pointer/touch system with explicit before/inside/after zones, restoring both reliable reordering and true nesting while showing a draggable folder ghost under the cursor.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`, `src/app/hooks/useVaultApp.ts`, `src/index.css`
  - Made row drops resolve to before/after by cursor position (fixing no-op downward moves), allowed same-parent append-to-end moves, and upgraded drag preview to show the actual folder being dragged.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`, `src/index.css`
  - Added a desktop mouse-pointer drag fallback for folder rows (with live drag preview) so click-hold drag reordering works even when native HTML drag events are flaky.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`
  - Changed folder row drops to reorder siblings when source/target share a parent (instead of nesting), so drag/drop reordering works with normal row dragging.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`, `src/app/hooks/useVaultApp.ts`, `src/index.css`
  - Restored folder drag/drop rearrangement with sibling reorder lanes + persistent manual ordering, and replaced `[ ]` folder placeholders with a real folder icon.
- 2026-02-12
  - Updated `src/features/nav/components/FolderContextMenu.tsx`, `src/features/items/components/ItemContextMenu.tsx`, `src/index.css`
  - Replaced flat-button context menus with a polished `.ctx-menu` system: lucide icons, grouped sections with dividers, keyboard-shortcut hints, viewport clamping, entrance animation, and danger-zone styling.
- 2026-02-12
  - Updated `src/features/nav/components/FolderTree.tsx`, `src/index.css`
  - Improved folder tree drag/drop with an explicit top root drop lane, live drop placeholders, and per-folder collapse/expand controls for easier navigation.
- 2026-02-12
  - Updated `src/app/hooks/useVaultApp.ts`, `src/features/nav/components/FolderTree.tsx`, `src/features/nav/components/FolderContextMenu.tsx`, `src/app/AppShell.tsx`, `src/index.css`; removed `src/features/folders/components/CreateFolderModal.tsx`
  - Replaced folder create/rename modals with inline tree editing, added desktop+touch folder drag reparenting, and split context actions into inline Rename plus separate Properties.
- 2026-02-12
  - Updated `src/index.css`, `src/features/nav/components/SidebarPane.tsx`
  - Added explicit spacing between the “Folders” heading and the first folder row, and removed an unused `mt-5` class for consistent sidebar layout.
- 2026-02-11
  - Updated `electron/main.cjs`
  - Changed hardcoded dev server URL from port 5173 to 4000 to match updated package.json scripts.
- 2026-02-11
  - Updated `src/App.tsx`, `src/app/AppRouter.tsx`, `src/app/AppShell.tsx`, `src/app/contexts/VaultAppContext.tsx`, `src/app/hooks/useVaultApp.ts`, `src/features/auth/components/*`, `src/features/layout/components/*`, `src/features/nav/components/*`, `src/features/items/components/*`, `src/features/folders/components/*`, `src/features/settings/components/SettingsModal.tsx`, `src/shared/utils/*`, `src/lib/convexClient.ts`, `src/app/types/app.ts`
  - Refactored the monolithic `App.tsx` into a feature/component architecture with a central `useVaultApp` orchestration hook + context provider, preserving behavior while improving reusability and clarity.
- 2026-02-11
  - Updated `electron/main.cjs`, `electron/preload.cjs`, `src/vite-env.d.ts`, `src/App.tsx`, `src/index.css`, `src/lib/convexClient.ts`
  - Fixed subfolder creation crash by replacing `prompt()` with an in-app modal, removed risk UI and density toggle, redesigned item rows with inline metadata/actions, and added Windows desktop autofill + item context menu actions.
- 2026-02-11
  - Updated `src/App.tsx`, `src/index.css`
  - Replaced unsupported `prompt()` subfolder flow with an in-app modal, removed density toggle (compact default), added item URL preview + item right-click menu actions, and polished list/context visuals.
- 2026-02-11
  - Updated `src/types/vault.ts`, `src/lib/vaultFile.ts`, `src/App.tsx`, `src/index.css`
  - Implemented the planned folder-tree architecture and compact detail editor (folder/category dropdown row), including folder context actions, Trash restore flow, retention settings, and payload migration to structured folders/categories/trash.
- 2026-02-11
  - Updated `src/App.tsx`, `convex/http.ts`
  - Removed locked-screen and auth/sync debugging traces (UI debug lines + verbose logs) to clean production flow without changing sync behavior.
- 2026-02-11
  - Updated `src/App.tsx`
  - Cleaned cloud snapshot UX on locked screens by prioritizing one "latest snapshot" action and collapsing older snapshots behind a toggle.
- 2026-02-11
  - Updated `src/App.tsx`, `README.md`
  - Renamed user-facing cloud "snapshot(s)" wording to "save(s)" for clearer terminology consistency.
- 2026-02-11
  - Updated `src/App.tsx`
  - Placed unlock and biometric actions inline with the master password field on the unlock screen, and changed biometric button text to a thumbprint.
- 2026-02-11
  - Updated `src/App.tsx`, `package.json`, `package-lock.json`
  - Replaced biometric emoji with a proper `lucide-react` fingerprint icon for the unlock action.
- 2026-02-11
  - Updated `src/App.tsx`, `src/index.css`
  - Added a dedicated inline biometric button style to center the fingerprint icon correctly in the unlock row.
- 2026-02-11
  - Updated `electron/main.cjs`, `electron/preload.cjs`, `src/App.tsx`, `src/index.css`, `src/vite-env.d.ts`
  - Replaced the native desktop title bar with a themed custom draggable title bar and wired custom minimize/maximize/close controls.
- 2026-02-11
  - Updated `src/App.tsx`, `src/index.css`
  - Made the custom desktop title bar render on create/unlock screens too, span full width, and use left app name + centered vault name + right window controls.
- 2026-02-11
  - Updated `src/App.tsx`, `src/index.css`
  - Added a close button in the item detail header to dismiss the open item and return mobile users to the list.
- 2026-02-10
  - Added `AGENTS.md` with a change-tracking policy.

